<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Drag test</title>

    <!-- styles -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="main.css"/>
    <link href='http://fonts.googleapis.com/css?family=Chewy' rel='stylesheet' type='text/css'>

  </head>
  <body>
    <div class="container">
    	<h1>Drag test</h1>
        <div class="game-container outlined">
            <div class="grid-row">
                <div data-row="1" data-column="1" class="grid-square">
                </div>
                <div data-row="1" data-column="2" class="grid-square">
                </div>
                <div data-row="1" data-column="3" class="grid-square">
                </div>
                <div data-row="1" data-column="4" class="grid-square">
                </div>
                <div data-row="1" data-column="5" class="grid-square">
                </div>
            </div><!-- grid-row -->
            <div class="grid-row">
                <div data-row="1" data-column="1" class="grid-square">
                </div>
                <div data-row="1" data-column="2" class="grid-square">
                </div>
                <div data-row="1" data-column="3" class="grid-square">
                </div>
                <div data-row="1" data-column="4" class="grid-square">
                </div>
                <div data-row="1" data-column="5" class="grid-square">
                </div>
            </div><!-- grid-row -->
            <div class="grid-row">
                <div data-row="1" data-column="1" class="grid-square">
                </div>
                <div data-row="1" data-column="2" class="grid-square">
                </div>
                <div data-row="1" data-column="3" class="grid-square">
                </div>
                <div data-row="1" data-column="4" class="grid-square">
                </div>
                <div data-row="1" data-column="5" class="grid-square">
                </div>
            </div><!-- grid-row -->
            <!-- <div id="userPointer"></div> -->
        </div>

    <!-- scripts -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!--script src="draggabilly.pkgd.min.js"></script-->
    <script>
    $(function(){
        var $square = $(".grid-square");
        var activeTurn = false;
        var currentMove = [];

        $(window).on('mousedown', function(){
            console.log("turn started!");
            activeTurn = true;
            turnManager();
        }).on('mouseup', function(){
            console.log("turn ended!");
            activeTurn = false;
            turnManager();
            resetSquaresHighlight();
            console.log(currentMove);
            currentMove = [];
        });
        function turnManager(){
            if (activeTurn == true){
                console.log("active turn: highlighting");
                $square.on('mousedown', selectSquare );
                $square.on('mouseenter', selectSquare );
            } else {
                console.log("turn not active");
                $square.off('mouseenter', selectSquare );
            };
        };
        function resetSquaresHighlight(){
            $square.removeClass('selected');
        }
        function unbindSquaresEvent(){
            $square.off('mouseenter', function(){});
        }
        function selectSquare(){
            //run checks, and if everything checks out
            if ( $(this).hasClass('selected') ){
                //alert('passing through again!');
                //remove from array
                //remove entry before it from array
                
                //NEXT - if the array index isn't the greatest, pop 2, else
                currentMove.pop();
                $(this).removeClass('selected');
            } else {
                $(this).addClass('selected');
                $(this).data('arrayIndex', currentMove.length);
                //$(this).text(currentMove.length);
                currentMove.push('square');
            };
            
            console.log(currentMove);
            console.log(currentMove.length);
        }

        // $(".game-container").on('mousedown', function(){
        //     console.log("turn started!");
        //     activeTurn = true;
        // }).on('mouseup', function(){
        //     console.log("turn ended!");
        //     activeTurn = false;
        // });
        // function turnInit(){
        //     if (activeTurn){
        //         $square.on('mouseenter', function(){
        //             $(this).addClass('selected');
        //         });
        //     } else {

        //     };
        // };
    });
    // var elem = document.querySelector('#userPointer');
    // var draggie = new Draggabilly(elem);
    </script>

  </body>
</html>